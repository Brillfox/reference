App.js

import React from 'react'
import Product from './components/Product'
import ProductForm from './components/ProductForm'
// import { connect } from 'react-redux'
// import { fetchData } from './actions/actions'

function App() {
  // useEffect(() => {
  //   props.onFetchData();
  //   console.log(props.data);
  // },[])
  return (
    <div style={{display: "flex"}}>
    <Product />  
      
       <ProductForm />
    </div>
  );
}

// const mapStatetoProps = (state) => {
//   return { num: state.num, data: state.data, error: state.error }
// }

// const mapDispatchprops = (dispatch) => {
//   return { onFetchData: () => dispatch(fetchData()) }
// }



// export default connect(mapStatetoProps, mapDispatchprops)(App);
export default App;


Index.js

import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';

import { createStore, applyMiddleware } from 'redux'
import thunk from 'redux-thunk'

import { Provider } from 'react-redux'
import reducer from './reducers/myreducer'

const store = createStore(reducer, applyMiddleware(thunk));



ReactDOM.render(<Provider store={store}>
  <App /></Provider>, document.getElementById('root'));

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();


make action folder in src and make actions.js file inside it
actions.js

import axios from 'axios'

export const fetchData = () => {

    return (dispatch) => {
        return  axios.get('https://dev.insee.com/mds/products/admin/getAllProductGroup')
        .then(response => {
            console.log(response);
            // setProducts(response.data.data)
            dispatch(
                { type: "FetchData", data: response })
            
        })
        .catch(error => {
            console.log(error);
            // setError({errorMsg: 'error in retrieving data'})
            dispatch(
                { type: "ERROR",msg: "Unable to fetch data" })
        })
    }

}

// export const sendData = (postData) => {
// return (dispatch) => {
//     return axios.post('https://dev.insee.com/mds/products/admin/addProductGroup', postData)
//     .then(response => {
//         dispatch({
//             type: "AddData", data: response
//         })
//     })
// }
// }


make components folder and make files Product.js and ProductForm.js

Product.js
import React, { useEffect } from 'react'
// import axios from 'axios'
import { connect } from 'react-redux'
import { fetchData } from '../actions/actions'

function Product(props){
    useEffect(() => {
        props.onFetchData()
        
        console.log(props.data);
      },[])
    // const [ products, setProducts] = useState([])
    // const [ errorMsg , setError ] = useState('')

    // useEffect(() => {
    //     axios.get('https://dev.insee.com/mds/products/admin/getAllProductGroup')
    //     .then(response => {
    //         console.log(response);
    //         setProducts(response.data.data)
            
    //     })
    //     .catch(error => {
    //         console.log(error);
    //         setError({errorMsg: 'error in retrieving data'})
    //     })
    // },[])
    
    return <div>
        List of products
        <table>
<tr>
    <th>Product Name</th>
    <th>Status</th>
</tr>
{
        props.data && props.data.data.data.length ? props.data.data.data.map((product,index) => <tr key={index}><td>{product.Product_Group_Name}</td><td>{product.status}</td></tr>) : null
    }
 
        </table>
    
    {/* { errorMsg ? <div>{errorMsg}</div> : null }  */}
                 </div>
            
        }
    
        const mapStatetoProps = (state) => {
            return { num: state.num, data: state.data, error: state.error }
          }
          
          const mapDispatchprops = (dispatch) => {
            return { onFetchData: () => dispatch(fetchData()) }
          }
    
          export default connect(mapStatetoProps, mapDispatchprops)(Product);

ProductForm.js
import React, { useState } from 'react'
import axios from 'axios'


function ProductForm(props) {
    // const [Product_Group_Name, setProduct_Group_Name] = useState('')
    // const [status, setStatus] = useState('') 
//    const  productHandler =(e) => {
//         setProduct_Group_Name( e.target.value )
//           }

//           const  statusHandler =(e) => {
//             setStatus( e.target.value )
//               }
        const submitHandler = (e) => {
                e.preventDefault()
            console.log(props.data.data);
            // let obj ={"productGroup":[
            //     {"Product_Group_Name":Product_Group_Name, "Status":status}
            // ]}

                // axios.post('https://dev.insee.com/mds/products/admin/addProductGroup', obj)
                // .then(response => {
                //     console.log(response);
                // })
                // .catch(error => {
                //     console.log(error);
                // })
                    }
                     return (
          <div>
                    <form id="tg" onSubmit={submitHandler}>
                         <div>
                            <input type='text' name='Product_Group_Name' ></input>
                         </div>
        
                         <div>
                               <input type='text' name='status' ></input>
                           </div>
        
                            
       <button type='submit'>Submit</button>
        
                     </form>
                 </div>
              )
           }
        
        



export default ProductForm


make reducer folder and make myreducer.js file in it
myreducer.js

const intialState = {
    num: 0,
    data: null,
    pdata: null,
    error: ""
}

const reducer = (state = intialState, action) => {

    switch (action.type) {
        
        case "FetchData":
            return { ...state, data: action.data }
            case "AddData":
                return{ ...state, data: action.pdata }
        case "ERROR":
            return { ...state, error: action.msg }
        default:
            return state
    }

}


export default reducer

App.test
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});


reportWebVitals.js
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;


setupTests.js
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';

App.css

.App {
  text-align: center;
}

.App-logo {
  height: 40vmin;
  pointer-events: none;
}

@media (prefers-reduced-motion: no-preference) {
  .App-logo {
    animation: App-logo-spin infinite 20s linear;
  }
}

.App-header {
  background-color: #282c34;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: white;
}

.App-link {
  color: #61dafb;
}

@keyframes App-logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

Index.js

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

