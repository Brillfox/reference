App.js

import './App.css'
import MainNav from './components/MainNav'

function App() {
  return (
    <div className='App'>
      <MainNav />
    </div>
  )
}

export default App


index.js

import React from 'react'
import ReactDOM from 'react-dom'
import './index.css'
import App from './App'
import reportWebVitals from './reportWebVitals'
import 'bootstrap/dist/css/bootstrap.min.css'
import { Provider } from 'react-redux'
import reducer from './reducers/reducers'
import thunk from 'redux-thunk'
import { createStore, applyMiddleware } from 'redux'

const store = createStore(reducer, applyMiddleware(thunk))

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
)

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals()

actions.js

import axios from 'axios'

export const fetchData1 = () => {
  return (dispatch) => {
    return axios
      .get('https://qa.insee.com/mds/contracts/account/0110000039')
      .then((response) => {
        // console.log(response)
        // setProducts(response.data.data)
        dispatch({ type: 'FetchData1', data: response.data })
      })
      .catch((error) => {
        console.log(error)
        // setError({errorMsg: 'error in retrieving data'})
        dispatch({ type: 'ERROR', msg: 'Unable to fetch data' })
      })
  }
}

export const fetchData2 = () => {
  return (dispatch) => {
    return axios
      .get('https://qa.insee.com/mds/ship-to/customer/0110000039')
      .then((response) => {
        // console.log(response)
        // setProducts(response.data.data)
        dispatch({ type: 'FetchData2', data: response.data })
      })
      .catch((error) => {
        console.log(error)
        // setError({errorMsg: 'error in retrieving data'})
        dispatch({ type: 'ERROR', msg: 'Unable to fetch data' })
      })
  }
}

export const fetchData3 = () => {
  return (dispatch) => {
    return axios
      .get('https://qa.insee.com/mds/plant/country/TH')
      .then((response) => {
        // console.log(response)
        // setProducts(response.data.data)
        dispatch({ type: 'FetchData3', data: response.data })
      })
      .catch((error) => {
        console.log(error)
        // setError({errorMsg: 'error in retrieving data'})
        dispatch({ type: 'ERROR', msg: 'Unable to fetch data' })
      })
  }
}

MainNav.js

import React from 'react'
import { Navbar, Nav, DropdownButton } from 'react-bootstrap'
import { fetchData1, fetchData2, fetchData3 } from '../actions/actions'
import { connect } from 'react-redux'
import DropdownItem from 'react-bootstrap/esm/DropdownItem'

const MainNav = (props) => {
  // console.log(props)
  const clickHandler1 = () => {
    props.onFetchData1()
  }

  const clickHandler2 = () => {
    props.onFetchData2()
  }

  const clickHandler3 = () => {
    props.onFetchData3()
  }

  const selectHandler = (e) => {
    console.log(e)
    // console.log(props.data1.data[e])
  }

  return (
    <div>
      <Navbar bg='dark' variant='dark'>
        <Navbar.Brand href='/'>Navbar</Navbar.Brand>
        <Nav className='mr-auto'>
          <DropdownButton
            id='dropdown-basic-button'
            title='Dropdown button'
            onClick={clickHandler1}
            onSelect={selectHandler}
          >
            {props.data1 &&
              props.data1.data.map((item, index) => (
                <DropdownItem key={index} eventKey={index}>
                  <p>{item.contractName}</p>

                  <p>{item.contractType}</p>
                </DropdownItem>
              ))}
          </DropdownButton>

          <DropdownButton
            id='dropdown-basic-button'
            title='Dropdown button'
            onClick={clickHandler2}
          >
            {props.data2 &&
              props.data2.data.map((item) => (
                <DropdownItem key={item.shipToId}>
                  <p>{item.shipToCode}</p>

                  <p>{item.shipToName}</p>
                </DropdownItem>
              ))}
          </DropdownButton>

          <DropdownButton
            id='dropdown-basic-button'
            title='Dropdown button'
            onClick={clickHandler3}
            onSelect={selectHandler}
          >
            {props.data3 &&
              props.data3.data.map((item) => (
                <DropdownItem key={item.plantCode} eventKey={item.plantCode}>
                  <p>{item.plantName}</p>

                  {/* <p>{item.shipToName}</p> */}
                </DropdownItem>
              ))}
          </DropdownButton>
        </Nav>
      </Navbar>
    </div>
  )
}

// export default MainNav

const mapStatetoProps = (state) => {
  return {
    data1: state.data1,
    data2: state.data2,
    data3: state.data3,
    error: state.error,
  }
}

const mapDispatchprops = (dispatch) => {
  return {
    onFetchData1: () => dispatch(fetchData1()),
    onFetchData2: () => dispatch(fetchData2()),
    onFetchData3: () => dispatch(fetchData3()),
  }
}

export default connect(mapStatetoProps, mapDispatchprops)(MainNav)

reducers.js

const intialState = {
  data1: null,
  data2: null,
  data3: null,
  error: '',
}

const reducer = (state = intialState, action) => {
  switch (action.type) {
    case 'FetchData1':
      return { ...state, data1: action.data }

    case 'FetchData2':
      return { ...state, data2: action.data }

    case 'FetchData3':
      return { ...state, data3: action.data }

    default:
      return state
  }
}

export default reducer
